<!-- loading -->
<text-spinner
  *ngIf="loading$ | async; else loaded"
  [text]="type === 'create' ? 'Loading Backup Targets' : 'Loading Backup Sources'"
></text-spinner>

<!-- loaded -->
<ng-template #loaded>
  <ion-item-group>
    <ion-item-divider>Saved Targets</ion-item-divider>
    <ion-item
      button
      *ngFor="let target of targets"
      (click)="select(target)"
      [disabled]="
          !target.mountable ||
          (type === 'restore' && !target['embassy-os'])
        "
    >
      <ng-container *ngIf="target | getDisplayInfo as displayInfo">
        <ion-icon
          slot="start"
          [name]="displayInfo.icon"
          size="large"
        ></ion-icon>
        <ion-label>
          <h1 style="font-size: x-large">{{ displayInfo.name }}</h1>
          <target-status [type]="type" [target]="target"></target-status>
          <p>{{ displayInfo.description }}</p>
          <p>{{ displayInfo.path }}</p>
        </ion-label>
      </ng-container>
    </ion-item>

    <div *ngIf="!targets.length" class="ion-text-center ion-padding-top">
      <h2 class="ion-padding-bottom">No saved targets</h2>
      <button tuiButton (click)="goToTargets()">Go to Targets</button>
    </div>
  </ion-item-group>
</ng-template>
