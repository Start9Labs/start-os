<marketplace-sidebar></marketplace-sidebar>
<div
  class="background sm:pl-[34vw] md:pl-[28vw] lg:pl-[22vw] 2xl:pl-[280px] min-h-screen flex justify-between overflow-auto scroll-smooth"
>
  <ion-content class="pt-20 sm:pt-3 md:pb-10 md:px-8">
    <div class="mt-8 px-6 mb-10">
      <h1 class="text-4xl sm:text-5xl font-bold text-zinc-50/80 pb-6">
        Sideload Package
      </h1>
    </div>
    <!-- invalid -->
    <div *ngIf="invalid; else valid" class="drop-area_filled">
      <h4>
        <ion-icon
          name="close-circle-outline"
          color="danger"
          class="inline"
        ></ion-icon>
        Invalid package file
      </h4>
      <ion-button color="primary" (click)="clear()">Try again</ion-button>
    </div>

    <!-- valid -->
    <ng-template #valid>
      <!-- uploaded -->
      <div class="ion-padding" *ngIf="pkgData?.pkg as pkg; else empty">
        <div class="ion-text-right">
          <ion-button color="danger" (click)="clear()">
            <ion-icon slot="icon-only" name="close"></ion-icon>
          </ion-button>
        </div>
        <marketplace-package></marketplace-package>
        <marketplace-show-controls [pkg]="pkg"></marketplace-show-controls>
        <marketplace-show-dependent [pkg]="pkg"></marketplace-show-dependent>
        <ion-item-group>
          <marketplace-about [pkg]="pkg"></marketplace-about>
          <marketplace-dependencies
            *ngIf="!(pkg.manifest.dependencies | empty)"
            [pkg]="pkg"
          ></marketplace-dependencies>
        </ion-item-group>
        <marketplace-additional [pkg]="pkg"></marketplace-additional>
      </div>
      <!-- empty -->
      <ng-template #empty>
        <div
          class="drop-area"
          [class.drop-area_mobile]="isMobile"
          appDnd
          (onFileDropped)="handleFileDrop($event)"
        >
          <ion-icon
            name="cloud-upload-outline"
            color="dark"
            style="font-size: 42px"
          ></ion-icon>
          <h4>Upload .s9pk package file</h4>
          <p *ngIf="onTor">
            <ion-text color="success">
              Tip: switch to LAN for faster uploads.
            </ion-text>
          </p>
          <ion-button color="primary" type="file" class="ion-margin-top">
            <label for="upload-photo">Browse</label>
            <input
              type="file"
              style="position: absolute; opacity: 0; height: 100%"
              id="upload-photo"
              (change)="handleFileInput($event)"
            />
          </ion-button>
        </div>
      </ng-template>
    </ng-template>
  </ion-content>
</div>
