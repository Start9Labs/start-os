<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/backups"></ion-back-button>
    </ion-buttons>
    <ion-title>Backup Targets</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-item>
    <ion-label>
      <h2>
        Backup targets are physical or virtual locations for storing encrypted
        backups. They can be physical drives plugged into your server, shared
        folders on your Local Area Network (LAN), or third party clouds such as
        Dropbox or Google Drive.
        <a [href]="docsUrl" target="_blank" rel="noreferrer"
          >View instructions</a
        >
      </h2>
    </ion-label>
  </ion-item>

  <!-- loading -->
  <skeleton-list
    *ngIf="loading$ | async; else loaded"
    [groups]="2"
    [rows]="2"
  ></skeleton-list>

  <!-- loaded -->
  <ng-template #loaded>
    <!-- error -->
    <p *ngIf="error$ | async as error; else noError">
      <ion-text color="danger">{{ error }}</ion-text>
    </p>

    <!-- no error -->
    <ng-template #noError>
      <ion-item-group>
        <ng-container *ngIf="targets['unsaved-physical'].length">
          <ion-item-divider>Unknown Physical Drives</ion-item-divider>
          <ion-item
            *ngFor="let drive of targets['unsaved-physical']"
          ></ion-item>
        </ng-container>

        <ion-item-divider>Saved Targets</ion-item-divider>
        <ion-item button detail="false" (click)="presentModalAddRemoteTarget()">
          <ion-icon slot="start" name="add" color="dark"></ion-icon>
          <ion-label>
            <b>Add New Target</b>
          </ion-label>
        </ion-item>
        <ion-item button *ngFor="let target of targets.saved"></ion-item>
      </ion-item-group>
    </ng-template>
  </ng-template>
</ion-content>
