<h1 class="heading ion-text-center">{{ name }}</h1>

<marketplace-search [(query)]="query"></marketplace-search>

<ng-container *ngIf="pkgs && categories; else loading">
  <marketplace-categories
    [categories]="categories"
    [category]="category"
    (categoryChange)="onCategoryChange($event)"
  ></marketplace-categories>

  <div class="divider"></div>

  <ion-grid *ngIf="pkgs | filterPackages: query:category:localPkgs as filtered">
    <div *ngIf="!filtered.length && category === 'updates'" class="ion-padding">
      <h1>All services are up to date!</h1>
    </div>

    <ion-row>
      <marketplace-item *ngFor="let pkg of filtered" [pkg]="pkg">
        <marketplace-status
          class="status"
          [pkg]="localPkgs[pkg.manifest.id]"
        ></marketplace-status>
      </marketplace-item>
    </ion-row>
  </ion-grid>
</ng-container>

<ng-template #loading>
  <marketplace-skeleton></marketplace-skeleton>
</ng-template>
