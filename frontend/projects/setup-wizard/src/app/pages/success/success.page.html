<canvas #canvas> Your browser does not support the canvas element. </canvas>
<ion-content>
  <ion-grid [fixed]="true">
    <!-- kiosk mode  -->
    <ng-container *ngIf="isKiosk; else notKiosk">
      <ion-card>
        <ion-row>
          <ion-col size-xs="12" class="ion-text-center">
            <div class="inline">
              <ion-icon
                name="checkmark-circle-outline"
                color="success"
              ></ion-icon>
              <h1>Setup Complete!</h1>
            </div>
            <h3 class="ion-padding-top">You will be redirected momentarily.</h3>
          </ion-col>
        </ion-row>
      </ion-card>
    </ng-container>
    <!-- not kiosk -->
    <ng-template #notKiosk>
      <ion-card>
        <ion-row>
          <ion-col size-xs="12" class="ion-text-center">
            <div style="margin-bottom: 4rem">
              <div class="inline">
                <ion-icon
                  name="checkmark-circle-outline"
                  color="success"
                ></ion-icon>
                <h1>Setup Complete!</h1>
              </div>
              <h3 *ngIf="recoverySource && recoverySource.type === 'backup'">
                You can now safely unplug your backup drive
              </h3>
              <h3 *ngIf="recoverySource && recoverySource.type === 'migrate'">
                You can now safely unplug your old drive
              </h3>
              <p>
                <code>embassy.local</code> was for setup only. It will no longer
                work. Please
                <a
                  style="
                    color: #6866cc;
                    text-decoration: none;
                    cursor: pointer;
                    font-weight: bold;
                  "
                  (click)="download()"
                >
                  download
                </a>
                and save your Embassy's address information for permanent
                access.
              </p>
            </div>

            <p style="margin-bottom: 1.5rem">
              <ion-text color="warning"><b>Warning!</b></ion-text> When clicking
              "Launch" below, your browser will warn you that the page is
              untrusted. You can safely bypass this warning. It will go away
              after you
              <a
                href="https://docs.start9.com/latest/user-manual/connecting/connecting-lan"
                target="_blank"
                rel="noreferrer"
                style="color: #6866cc; text-decoration: none; font-weight: bold"
              >
                follow the instructions
              </a>
              to
              <a
                style="
                  color: #6866cc;
                  text-decoration: none;
                  cursor: pointer;
                  font-weight: bold;
                "
                (click)="installCert()"
              >
                download
              </a>
              and trust your Embassy's Root Certificate Authority.
            </p>

            <ion-button
              color="success"
              [href]="lanAddress"
              target="_blank"
              expand="block"
            >
              Launch
              <ion-icon
                slot="end"
                name="rocket-outline"
                color="light"
              ></ion-icon>
            </ion-button>
            <!-- <a href="{{ lanAddress }}" target="_blank">
              <button class="pushable">
                <span class="shadow"></span>
                <span class="edge"></span>
                <span class="front">Launch Embassy</span>
              </button>
            </a> -->
          </ion-col>
        </ion-row>
        <!-- cert elem -->
        <a hidden id="install-cert" download="embassy.crt"></a>
        <!-- download elem -->
        <div
          hidden
          id="downloadable"
          style="
            font-family: Montserrat;
            color: #333333;
            max-width: 35vw;
            display: flex;
            margin: auto;
          "
        >
          <div style="padding: 16px 256px">
            <h1
              style="
                font-variant-caps: all-small-caps;
                text-align: center;
                padding: 1rem;
              "
            >
              Embassy Address Info
            </h1>

            <section
              style="
                padding: 1rem 3rem 2rem 3rem;
                border: solid #c4c4c5 3px;
                margin-bottom: 24px;
              "
            >
              <h2 style="font-variant-caps: all-small-caps">
                Access from home (LAN)
              </h2>
              <p>
                Visit the address below when you are connected to the same WiFi
                or Local Area Network (LAN) as your Embassy:
              </p>
              <p style="padding: 16px; font-weight: bold; font-size: 1.1rem">
                <code id="lan-addr">sdfsfsdf</code>
              </p>
              <div>
                <h3 style="color: #f8546a; font-weight: bold">Important!</h3>
                <p>
                  Your browser will warn you that the page is untrusted. You can
                  safely bypass this warning. It will go away after you
                  <a
                    href="https://docs.start9.com/latest/user-manual/connecting/connecting-lan"
                    target="_blank"
                    rel="noreferrer"
                    style="color: #6866cc; text-decoration: none"
                  >
                    follow the instructions
                  </a>
                  to download and trust your Embassy's Root Certificate
                  Authority.
                </p>
              </div>

              <div style="padding: 2rem; text-align: center">
                <a
                  id="cert"
                  download="embassy.crt"
                  style="
                    background: #6866cc;
                    padding: 14px 16px;
                    text-decoration: none;
                    border-radius: 24px;
                    color: #f4f4f5;
                  "
                >
                  Download Root CA
                </a>
              </div>
            </section>

            <section
              style="padding: 1rem 3rem 2rem 3rem; border: solid #c4c4c5 3px"
            >
              <h2 style="font-variant-caps: all-small-caps">
                Access on the go (Tor)
              </h2>
              <p>Visit the address below when you are away from home:</p>
              <p style="padding: 16px; font-weight: bold; font-size: 1.1rem">
                <code id="tor-addr">sdfsdfsds</code>
              </p>
              <div>
                <h3 style="color: #f8546a; font-weight: bold">Important!</h3>
                <p>
                  This address will only work from a Tor-enabled browser.
                  <a
                    href="https://docs.start9.com/latest/user-manual/connecting/connecting-tor"
                    target="_blank"
                    rel="noreferrer"
                    style="color: #6866cc; text-decoration: none"
                  >
                    Follow the instructions
                  </a>
                  to get setup.
                </p>
              </div>
            </section>
          </div>
        </div>
      </ion-card>
    </ng-template>
  </ion-grid>
</ion-content>
